FROM java:8-jdk

EXPOSE 8080

ENV SPRING_PROFILE prod
ENV TIMETRACK_BACKEND_HOME /opt/timetrack
ENV TIMETRACK_BACKEND_JAR_NAME backend.jar

COPY ./target/$TIMETRACK_BACKEND_JAR_NAME $TIMETRACK_BACKEND_HOME/$TIMETRACK_BACKEND_JAR_NAME
CMD /usr/lib/jvm/java-8-openjdk-amd64/bin/java \
    -jar \
    -Dspring.profiles.active=$SPRING_PROFILE \
    $TIMETRACK_BACKEND_HOME/$TIMETRACK_BACKEND_JAR_NAME
